# Configuration file for MarkedRain 

mainmenu "MarkedRain $(MRAIN_VERSION) Configuration"

menu "Makefile customizations"
    config bool_show_cmd
        bool "Display all commands being sent to the terminal"
        default n
        help
            Removes the '@' symbol from the start of every command,
            effectively showing them in the terminal screen. Enable
            this if you want to debug something or just need to have
            a more verbose building process.

    config bool_show_cmd_out
        bool "Display normal output of commands"
        default y
        help
            If not checked, this adds "> /dev/null" to the end of all
            commands, making the output redirect to void & showing them.
            Enable it so you can see what the stuff called by make
            are doing.

        config bool_show_cmd_out_err
            bool "Display important messages of commands"
            default y
            depends on !bool_show_cmd_out
            help
                If not checked, this adds "> /dev/null 2>&1" to the end of all
                commands, hiding every possible output of a command, including
                error messages. Enable it so you can see these important messages.

    config val_unmain_sect
        string "Targets to exclude from global code"
        default "run clean cleanall wipe"
        help
            Specify targets that will skip over the global variable
            declarations and exportings. This is a space-separated list of
            target names. If a target in this list is detected in MAKECMDGOALS,
            'global' will not execute code other than bool_show_cmd and
            bool_show_cmd_out.

    config bool_do_timeout
        bool "Wait if another ISO image with the same name already exists"
        default y
        help
            Set this option to true if you want Make to wait a few
            seconds specified in val_timeout_num if a file with
            the same location provided in bin_dir_iso already exists.
            Set this to false to compile without waiting.

            Only takes effect if 'ISO=y' is passed to make.

        config val_timeout_num
            int "Seconds to waste time"
            depends on bool_do_timeout
            default "20"
            help
                Timer value for bool_do_timeout

    config bool_use_old_headings
        bool "Use legacy style for headings"
        default n
        help
            Set this option to true if you want to replace the
            newer style of showing headings as "---[]---"
            with the older style "// //" (Does not have old
            versions for newer features, like "  -[]-  ").

        menu "Message ANSI escape sequence"
        depends on !bool_use_old_headings
            config col_HEADING
                string "Heading"
                default "\\e[1;37;45m"

            config col_SUBHEADING
                string "Sub-heading"
                default "\\e[1;35;40m"

            config col_INFOHEADING
                string "Informative Heading"
                default "\\e[37;44m"

            config col_INFO
                string "Regular Information"
                default "\\e[36m"

            config col_TRUE
                string "Variable is TRUE"
                default "\\e[32m"

            config col_FALSE
                string "Variable is FALSE"
                default "\\e[91m"

            config col_DONE
                string "OK Message"
                default "\\e[92m"

            config col_ERROR
                string "Error Message"
                default "\\e[1;91m"

            config col_IMP
                string "Important Message"
                default "\\e[1;37;41m"

            config col_NORMAL
                string "Default terminal color"
                default "\\e[0m"
        endmenu
endmenu

menu "Source configuration"
    config src_dir
        string "Project's source directory"
        default "source"
        help
            The source directory contains all the files used to
            build MarkedRain OS. If you renamed the folder, or
            want to switch up the source files a bit, rename
            this value too. Remember, the new source directory
            must contain all of the stuff as the old one, like
            "buildroot" and "configs".

    config src_dir_buildroot
        string "Buildroot source directory"
        default "$[src_dir]/buildroot"
        help
            The buildroot source directory contains source
            code for various buildroot utilites.

    config src_dir_conf
        string "Configurations directory"
        default "$[src_dir]/configs"
        help
            The configurations directory contains files
            that are used for the compiling and using
            procedures of the operating system.

    config src_dir_initramfs
        string "Initramfs source directory"
        default "$[src_dir]/initramfs"
        help
            The initramfs is a compressed, temporary root filesystem
            loaded into memory during boot which provides some
            necessary items for mounting the real root filesystem.

    config src_dir_linux
        string "Linux kernel directory (bzImage file)"
        default "$[src_dir]/kernel/bzImage"
        help
            The linux kernel directory contains the kernel
            image that's used in MRain OS. If you renamed
            the kernel directory or the bzImage file,
            change this value to point to that file.

    config src_dir_ohmyzsh
        string "OhMyZsh source directory"
        default "$[src_dir]/ohmyzsh"
        help
            The OhMyZsh source directory contains the
            source code of Oh My Zsh, which is a thing
            that adds some really cool stuff to Zsh.

    config src_dir_scripts
        string "Scripting directory"
        default "$[src_dir]/scripts"
        help
            The scripting directory has scripts that are
            used while making the operating system.
endmenu

menu "Destination configuration"
    config bin_dir
        string "Memory-based output directory"
        default "bin"
        help
            The memory-based output directory is a directory
            in which the contents are not directly saved to
            disk, but rather onto the memory. This is mainly
            an effort to increase performance and reduce any
            disk degradation.

            It does this by creating a symlink to
            '/dev/shm/mrain-bin'.

            Any contents stored within it will be lost when the
            computer loses power.

            This directory would contain the latest ISO image
            made, and its extracted contents (if bool_clean_dir_tmp
            is disabled).

            The name of the ISO image would be 'boot.iso'.

    config bin_dir_iso
        string "Location & name to output the ISO image"
        default "builds/latest.iso"
        help
            This is the location of the regular ISO Image that
            is saved to disk.

            This will only be used if 'ISO=y' is passed to make.

    config bin_dir_tmp
        string "Location to put temporary contents"
        default "$[bin_dir]/temp"
        help
            This variable contains the location where
            temporary files will reside. This location
            is mostly used to put the stuff in it into
            the iso image.

            It is located within the memory-based folder
            located in variable bin_dir by default.

    config bin_dir_tmp_squashfs
        string "Location to put SquashFS temporary archive"
        default "$[bin_dir]/squashfs"
        help
            This variable contains the location where
            the files used to create the SquashFS image
            specified in sys_dir_squashfs reside.

            It is located within the memory-based folder
            located in variable bin_dir by default.

    config bool_clean_dir_tmp
        bool "Clean the directory of temporary contents"
        default y
        help
            Enable this if you want MRain to automatically
            remove all contents of bin_dir_tmp &
            bin_dir_tmp_squashfs, which may free up some memory.
            If you are trying to diagnose any issues of the final
            product, then you may want to set this to N.

    config sys_dir_apps
        string "Programs directory"
        default "/Program Files"
        depends on hide_this_funct
        help
            Enter the location of the users directory.
            This value can be used in Makefile using
            $[sys_dir_usr]. This directory houses the
            user's files and customizations.

    menu "Program installation sub-directories"
    depends on hide_this_funct
        comment "If you don't want MRain to include an app,"
        comment "leave its directory blank."
        config app_dir_ohmyzsh
            string "OhMyZsh"
            default "$[sys_dir_apps]/ohmyzsh"
    endmenu

    config sys_dir_usr
        string "Users directory"
        default "/Users"
        depends on hide_this_funct
        help
            Enter the location of the users directory.
            This value can be used in Makefile using
            $[sys_dir_usr]. This directory houses the
            user's files and customizations.

    config sys_dir_sys
        string "System directory"
        default "/System"
        depends on hide_this_funct
        help
            Enter the location of the system directory.
            This value can be used in Makefile using
            $[sys_dir_sys]. This directory houses many
            important files that are used by MRain OS.

    config sys_dir_linux
        string "Linux kernel location"
        default "/boot/bzImage"
        help
            Enter the location to copy the linux kernel into in the iso
            image. This value would also be used to determine the kernel's
            location from the grub or extlinux config file.

    config sys_dir_initramfs
        string "Initramfs location"
        default "/boot/init.cpio.zst"
        help
            Enter the location to copy the initramfs into in the iso
            image.
            
    config sys_dir_squashfs
        string "SquashFS archive location"
        default "/boot/system.squashfs"
        help
            Enter the location to create the SquashFS archive in the iso
            image. SquashFS is a compressed read-only format that serves
            as the lower layer for overlayfs, which is used to create a
            system that is stored on memory.

    config bool_move_root
        bool "Move root directories into system directory"
        default y
        depends on hide_this_funct
        help
            Enable this option to move essential root directories like
            '/usr/lib' into a specified directory.
            
            When enabled, the init program will be set to where preinit
            is located. It will create the necessary symlinks to those
            directories and start the main init process.

        menu "New paths for root directories"
        depends on bool_move_root
            config sys_dir_newroot_etc
                string "/etc"
                default "$[sys_dir_sys]/sysconf"

            config sys_dir_newroot_opt
                string "/opt"
                default "$[sys_dir_sys]/addons"

            config sys_dir_newroot_root
                string "/root"
                default "$[sys_dir_usr]/Administrator"

            config sys_dir_newroot_tmp
                string "/tmp"
                default "$[sys_dir_sys]/temp"

            config sys_dir_newroot_bin
                string "/usr/bin"
                default "$[sys_dir_apps]/system"

            config sys_dir_newroot_lib
                string "/usr/lib"
                default "$[sys_dir_sys]/library"

            config sys_dir_newroot_lib_modules
                string "/usr/lib/modules"
                default "$[sys_dir_sys]/base/modules"

            config sys_dir_newroot_libexec
                string "/usr/libexec"
                default "$[sys_dir_sys]/library/services"

            config sys_dir_newroot_share
                string "/usr/share"
                default "$[sys_dir_sys]/shared"

            config sys_dir_newroot_sbin
                string "/usr/sbin"
                default "$[sys_dir_sys]/sysapps"

            config sys_dir_newroot_var
                string "/var"
                default "$[sys_dir_sys]/variable"
        endmenu
endmenu

menu "Operating System configuration"
    menu "Bootloader configuration"
        config val_grub-boot_default
            int "Default entry to boot"
            default 0
            help
                Specifies the default entry to be booted into in
                GRUB and Extlinux. The iso image is probably
                only going to have MRain in it, so set this to 0.

        config val_grub-boot_timeout
            int "Seconds before booting automatically"
            default 0
            help
                Specifies the amount of time to wait in seconds
                before automatically booting the entry specified
                in "val_grub-boot_default".

        config val_grub-boot_resolution
            string "Screen resolution to use on boot"
            default "1024x768"
            help
                The string entered in the format <width>x<height>x<depth> is
                used as the screen resolution for linux in the booting process.
                Beware, there are only a handful of resolutions supported,
                "1024x768" being one of them - not too big, not too small.
                That's what she didn't say.

        config val_grub-entry-one_name
            string "Distribution name in bootloader"
            default "MarkedRain Linux"
            help
                The name that gets displayed on booting as the first entry's
                name. Will not get seen if timeout is zero, or the menu is
                hidden for whatever reason.

        config val_grub-entry-one_li_root
            string "Device to mount as root"
            default "/dev/sda"
            help
                This is the device that the linux kernel mounts as
                root during boot as "root=<value>". Do not change
                unless you are having problems relating to root.

        config val_grub-entry-one_li_params
            string "Additional parameters to pass to kernel"
            default "rw console=ttyS0 console=tty0"
            help
                The options here will get passed into kernel,
                after everything before it like "root=/dev".
                Seperate all options with spaces, like
                "quiet rw"
    endmenu

    config bool_include_aliases
        bool "Include convenient commands"
        default y
        help
            Enable this option to include convenient aliases & functions
            such as 'del' for 'rm', 'ren' for renaming files,
            'ls --color' for colored directory listings, and others.

    menu "System version information"
        config VERSION
            int "Major release number [VERSION]"
            default 0
            help
                This variable contains the major version of the version string,
                which looks like "<major>.<minor>.<sub-minor>.<count>-<tag>".
                
        config PATCHLEVEL
            int "Minor release number [PATCHLEVEL]"
            default 0
            help
                This variable contains the minor version of the version string,
                which looks like "<major>.<minor>.<sub-minor>.<count>-<tag>".

        config SUBLEVEL
            int "Sub-minor release number [SUBLEVEL]"
            default 3
            help
                This variable contains the sub-minor version of the version string,
                which looks like "<major>.<minor>.<sub-minor>.<count>-<tag>".

        comment "'count' is set by 'LATEST_NEXT' in bcount.txt"

        config RELEASE_TAG
            string "Version release tag"
            default "none"
            help
                This variable contains the release 'tag' of the version string,
                which looks like "<major>.<minor>.<sub-minor>.<count>-<tag>".
    endmenu
endmenu

menu "Utilities"
    config CC
        string "C code compiler w/ arguments"
        default "gcc"
        help
        Specify the C code compiler and its arguments. This can be used to
        define the compiler and options used during the build process.

        The default value is "gcc".

    config util_vm
        string "Virtualization software"
        default "qemu-system-x86_64"
        help
            The VM software is used to run the iso image created with
            make. If you change this to anything other than QEMU, change
            the parameters too to make it work with that software.

    config util_vm_params
        string "Parameters to be sent to the Virtualization software"
        default "-m 256M -serial stdio"
        help
            These parameters will be directly sent to the VM software
            by appending it to the end of its filename. Different
            VM software may have different ways of interpreting the 
            same thing, so do your research before modifying this.
endmenu

menu "Other configurations"
    menu "Buildroot (placeholder)"
    endmenu

    config val_remake_br_pack
        string "BR Packages to remake upon version change"
        default "openrc"
        help
            This variable contains the package names in buildroot
            that uses a fixed version string when compiling and
            does not change dynamically according to a version
            file, found in their package makefiles.

            Leave blank to not remake any packages automatically.

            Makefiles edited: gcc perl openrc swupdate
endmenu
